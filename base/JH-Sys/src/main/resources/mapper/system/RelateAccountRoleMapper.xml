<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jh.system.mapping.IRelateAccountRoleMapper" >
  <resultMap id="BaseResultMap" type="com.jh.system.entity.RelateAccountRole" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="account_id" property="accountId" jdbcType="INTEGER" />
    <result column="role_id" property="roleId" jdbcType="INTEGER" />
  </resultMap>

  <!--
     插入账号和角色的关联关系
     @version <1> 2018/1/24 djh： Created.
  -->
  <insert id="save" parameterType="RelateAccountRole">
      insert into sys_relate_account_role(account_id, role_id)
      VALUES (#{accountId}, #{roleId})
  </insert>

    <select id="findByAccountId" parameterType="RelateAccountRole" resultMap="BaseResultMap">
        select * from sys_relate_account_role where account_id = #{accountId} and role_id=#{roleId}
    </select>













    <!--
   /**
    * 添加账号角色关联信息
    * @param relateAccountRoleEntity 账号角色关联对象
    * @return   ResultMessage
    * @version <1> 2018-05-09 cxw： Created.
    */
 -->

    <select id="findRoleByAccountId" resultType="HashMap" parameterType="HashMap">
        SELECT account_id as "accountId",a.role_id as "roleId",role_code as "roleCode",role_name as "roleName",role_type as "roleType",
        b.order_file_num as "orderFileNum"
        FROM sys_relate_account_role a JOIN  sys_perm_role b ON a.role_id = b.role_id WHERE a.account_id = #{accountId}
        AND b.data_status = #{dataStatus} AND b.del_flag = #{delFlag}
    </select>

</mapper>